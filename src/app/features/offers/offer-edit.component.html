<div class="space-y-4">
  <header class="flex items-center justify-between border-b border-gray-200 pb-4">
    <h1 class="text-xl font-semibold text-gray-900">Edit offer</h1>
    <a
      [routerLink]="['/app/offers', offer()?.id]"
      class="rounded px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100"
    >
      Cancel
    </a>
  </header>

  @if (loading()) {
    <div class="flex justify-center py-12">
      <div class="h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent" aria-hidden="true"></div>
    </div>
  } @else {
    @if (error()) {
      <p class="text-sm text-red-600">{{ error() }}</p>
    }
    <form (ngSubmit)="onSubmit()" class="max-w-xl space-y-4">
      <div>
        <label for="title" class="block text-sm font-medium text-gray-700">Title</label>
        <input
          id="title"
          type="text"
          [(ngModel)]="title"
          name="title"
          class="mt-1 block w-full rounded border border-gray-300 px-3 py-2 text-sm"
          required
        />
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label for="finalPrice" class="block text-sm font-medium text-gray-700">Final price</label>
          <input
            id="finalPrice"
            type="number"
            [(ngModel)]="finalPrice"
            name="finalPrice"
            step="0.01"
            class="mt-1 block w-full rounded border border-gray-300 px-3 py-2 text-sm"
          />
        </div>
        <div>
          <label for="currency" class="block text-sm font-medium text-gray-700">Currency</label>
          <input
            id="currency"
            type="text"
            [(ngModel)]="currency"
            name="currency"
            class="mt-1 block w-full rounded border border-gray-300 px-3 py-2 text-sm"
          />
        </div>
      </div>
      <div>
        <label for="validUntil" class="block text-sm font-medium text-gray-700">Valid until</label>
        <input
          id="validUntil"
          type="date"
          [(ngModel)]="validUntil"
          name="validUntil"
          class="mt-1 block w-full rounded border border-gray-300 px-3 py-2 text-sm"
        />
      </div>
      <div>
        <label for="description" class="block text-sm font-medium text-gray-700">Description</label>
        <textarea
          id="description"
          [(ngModel)]="description"
          name="description"
          rows="4"
          class="mt-1 block w-full rounded border border-gray-300 px-3 py-2 text-sm"
        ></textarea>
      </div>
      <div class="flex gap-3">
        <button
          type="submit"
          [disabled]="saving()"
          class="rounded bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary-hover disabled:opacity-50"
        >
          @if (saving()) {
            <span class="inline-block h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent" aria-hidden="true"></span>
          } @else {
            Save
          }
        </button>
        <a
          [routerLink]="['/app/offers', offer()?.id]"
          class="rounded px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100"
        >
          Cancel
        </a>
      </div>
    </form>
  }
</div>
